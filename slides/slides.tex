%#BIBTEX pbibtex slides
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass[12pt,dvipdfmx]{beamer}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% pdfの栞・プロパティの字化けを防ぐ
\usepackage{atbegshi}
%\AtBeginShipoutFirst{\special{pdf:tounicode 90ms-RKSJ-UCS2}} %Windows
\AtBeginShipoutFirst{\special{pdf:tounicode EUC-UCS2}} %Linux, Mac
\usepackage{hyperref}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%
%%% テーマの指定、省略時は default になる
%%%

 % フレームの指定、省略可
%%%%%%%%%%%%%%%%%%%%%%%%%%%% THEME
  %\usetheme{AnnArbor}
  %\usetheme{Antibes}
  %\usetheme{Bergen}
  %\usetheme{Berkeley}
  %\usetheme{Berlin}
  \usetheme{Boadilla}
  %\usetheme{boxes}
  %\usetheme{CambridgeUS}
  %\usetheme{Copenhagen}
  %\usetheme{Darmstadt}
  %\usetheme{default}
  %\usetheme{Dresden}
  %\usetheme{Frankfurt}
  %\usetheme{Goettingen}
  %\usetheme{Hannover}
  %\usetheme{Ilmenau}
  %\usetheme{JuanLesPins}
  %\usetheme{Luebeck}
  %\usetheme{Madrid}
  %\usetheme{Malmoe}
  %\usetheme{Marburg}
  %\usetheme{Montpellier}
  %\usetheme{PaloAlto}
  %\usetheme{Pittsburgh}
  %\usetheme{Rochester}
  %\usetheme{Singapore}
  %\usetheme{Szeged}
  %\usetheme{Warsaw}

% 省略可
%%%%%%%%%%%%%%%%%%%%%%%%%%%% COLOR THEME
  %\usecolortheme{albatross}
  %\usecolortheme{beetle}
  %\usecolortheme{crane}
  %\usecolortheme{default}
  %\usecolortheme{dolphin}
  %\usecolortheme{dove}
  %\usecolortheme{fly}
  %\usecolortheme{lily}
  %\usecolortheme{orchid}
  %\usecolortheme{rose}
  %\usecolortheme{seagull}
  %\usecolortheme{seahorse}
  %\usecolortheme{sidebartab}
  %\usecolortheme{structure}
  %\usecolortheme{whale}

% ヘッダ、フッタ、フレーム等を指定、省略可
  %%%%%%%%%%%%%%%%%%%%%%%%%%%% OUTER THEME
  %\useoutertheme{default}
  %\useoutertheme{infolines}
  %\useoutertheme{miniframes}
  %\useoutertheme{shadow}
  %\useoutertheme{sidebar}
  %\useoutertheme{smoothbars}
  %\useoutertheme{smoothtree}
  %\useoutertheme{split}
  %\useoutertheme{tree}

% タイトル、section, itemize/enumerate 環境、
% theorem 環境、図, 参考文献などのスタイルを指定、
% 省略可
  %%%%%%%%%%%%%%%%%%%%%%%%%%%% INNER THEME
  %\useinnertheme{circles}
  %\useinnertheme{default}
  %\useinnertheme{inmargin}
  \useinnertheme{rectangles}
  %\useinnertheme{rounded}


%\usefonttheme{}	% 省略可
%\logo{}		% 省略可

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% navi. symbolsは目立たないが，dvipdfmxを使うと機能しないので非表示に
\setbeamertemplate{navigation symbols}{}

% 各種パッケージ
\usepackage{graphicx}
%\usepackage{url,cite}
\usepackage{amsmath}
\usepackage{amsthm} \theoremstyle{definition} %theorem環境が斜体になるので注意
\usepackage{amssymb} % AMS-TeX
\usepackage{setspace}

% \AtBeginSection[] % Do nothing for \section*
% { \begin{frame}<beamer> \frametitle{}
%    \tableofcontents[currentsection,subsectionstyle=hide]
%  \end{frame} } 

%appendixをページカウントしない
\newcommand{\backupbegin}{
   \newcounter{framenumberappendix}
   \setcounter{framenumberappendix}{\value{framenumber}}
}
\newcommand{\backupend}{
   \addtocounter{framenumberappendix}{-\value{framenumber}}
   \addtocounter{framenumber}{\value{framenumberappendix}} 
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 本文・数式フォント
%\usepackage{palatino,mathpazo}
%\usepackage{times,mathptmx}
\usepackage[varg]{txfonts}
%\usepackage[varg]{pxfonts}

% \mathcal(\cal)の扱い
%\DeclareMathAlphabet{\mathcal}{OMS}{cmsy}{m}{n} %computer modern
%\DeclareMathAlphabet{\mathcal}{OMS}{txsy}{m}{n} %txfont
%\usepackage[psamsfonts]{eucal} % euler

% mathptmx時に数式モードのvをtxfontから借りる
% \DeclareSymbolFont{lettersA}{U}{txmia}{m}{it}
% \SetSymbolFont{lettersA}{bold}{U}{txmia}{bx}{it}
% \DeclareFontSubstitution{U}{txmia}{m}{it}
% \DeclareMathSymbol{v}{\mathalpha}{lettersA}{"33} %"


%上線 widebar, Widebar
\usepackage{accents}
\makeatletter
\def\widebar{\accentset{{\cc@style\underline{\mskip11mu}}}}
\makeatother


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{colortbl}
%\mathversion{bold}
\input{colordef.tex}

% %appendixをページカウントしない
% \newcommand{\backupbegin}{
%    \newcounter{framenumberappendix}
%    \setcounter{framenumberappendix}{\value{framenumber}}
% }
% \newcommand{\backupend}{
%    \addtocounter{framenumberappendix}{-\value{framenumber}}
%    \addtocounter{framenumber}{\value{framenumberappendix}} 
% }

% 定理環境
% \newtheorem{theorem}{Theorem}
% \newtheorem{lemma}[theorem]{Lemma}
% \newtheorem{corollary}[theorem]{Corollary}
% \newtheorem{definition}[theorem]{Definition}
% \newtheorem{example}[theorem]{Example}
\newtheorem{proposition}{Proposition}
\newtheorem{remark}{Remark}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 各種コマンド定義等
\def\Fig#1{Fig.\@\ref{#1}}
\def\Table#1{Table~\ref{#1}}
\def\Eq#1{Eq.\@(\ref{#1})}
\def\Eqs#1{Eqs.\@(\ref{#1})}
\def\Thm#1{Theorem~\ref{#1}}
\def\Lma#1{Lemma~\ref{#1}}
\def\Sect#1{Section~\ref{#1}}
\def\Rmk#1{Remark~\ref{#1}}
\def\Prop#1{Proposition~\ref{#1}}
\def\Coro#1{Corollary~\ref{#1}}
\def\Def#1{Definition~\@\ref{#1}}
\def\Prob#1{Problem~\@\ref{#1}}
\def\ie{{i.\@e.\@,~}}
\def\eg{{e.\@g.\@,~}}
\def\etal{{et al.}}

% 数式環境用
\def\rank{\mathsf{rank}\, }
\def\dim{\mathsf{dim}\, }
\def\rspace{\mathsf{span}}
\def\supp{\mathsf{supp}}
%\def\vec#1{\mathbf{#1}}
\def\F{\mathbb{F}}
\def\wt{\mathsf{wt}}
\def\c{\mathcal{C}}
\def\dc{\mathcal{C}^{\perp}}
\def\d{\mathcal{D}}
\def\dd{\mathcal{D}^{\perp}}
\def\g{\mathcal{G}}
\def\dg{\mathcal{G}^{\perp}}
\def\p{\mathcal{P}}
% \def\rspace{\mathsf{span}}
\def\supp{\mathsf{supp}}
\def\ker{\mathsf{Ker\ }}

%\def\bari#1{\{\widebar{#1}\}}
\def\bari#1{\,\overline{{\!\{#1\}\!}}\,}
%\def\bari#1{\bar{\{#1\}}}
\def\vecxi{Z_{\bari{i}}}
%\def\vecsxi{\vec{z}_i}
\def\tvector{X}
\def\tpackets{X_1,\dots,X_n}
\def\mvector{S}
\def\mpackets{S_1,\dots,S_l}
\def\rvector{Y}
\def\wvector{W}
\def\cvector{C}
\def\cword{C_{1},\dots,C_{l+n}}
\def\pcword{C_{l+1},\dots,C_{l+n}}
\def\randvector{R}

\def\compmat{\Phi}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%
%%%  日本語フォントをゴシックに、数式フォントを太字に変更する
%%%
\renewcommand{\kanjifamilydefault}{\gtdefault}
\renewcommand{\familydefault}{\sfdefault}

\setbeamerfont{title}{size=\large,series=\bfseries}
\setbeamerfont{frametitle}{size=\large,series=\bfseries}
%\setbeamertemplate{frametitle}[default][center]
\usefonttheme{professionalfonts} 

%\mathversion{bold} %数式フォントを太字に

%\def\vec#1{\mbox{\boldmath $#1$}}


%\logo{\includegraphics[width=2cm]{titech_logo.eps}}

%\setbeamertemplate{caption}[numbered]
%%%
%%% 著者など
%%%
\title[E2E Security with JS]{JavaScriptによるEnd-to-Endセキュリティ}
\subtitle{入門編}
\author[Jun Kurihara]{栗原 淳}
\institute[]{}
\date[\today]{\today}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}

\begin{frame}
\titlepage
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{はじめに}
\begin{frame}
 \centering
 {\Large はじめに}
\end{frame}
\begin{frame}
\frametitle{はじめに}
この講義では
\begin{itemize}
 \item End-to-End (E2E) セキュリティの原則
 \item WebサイトでのE2Eセキュリティ実践のため、JavaScriptでの実装方法
\begin{itemize}
 \item ブラウザ側
 \item サーバ側 (Node.js)
\end{itemize}
\end{itemize}
のさわりを学ぶ。

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{モダンWebサイトとEnd-to-Endセキュリティ}
\begin{frame}
 \centering
 {\Large モダンWebサイトとEnd-to-Endセキュリティ}
\end{frame}

\begin{frame}
\frametitle{Webサイトにおける昨今の情勢}
\begin{itemize}
\item EUにおけるGeneral Data Protection Regulation (GDPR) の施行 (2018年)\\
\item GDPRに続いて、カリフォルニア、南米、オセアニアで類似の法律の制定の動き\\
\item 日本においても、2020年に個人情報保護法の改正法案提出の見通し
\end{itemize}
\begin{center}
$\Downarrow$\\
\alert{企業にとって、「正しく」「強固」に\\
ユーザデータ、ユーザプライバシを保護することは必須の事項}
\end{center}
\end{frame}

\begin{frame}
\frametitle{最近流行りのWebシステム}
\begin{itemize}
 \item クラウドプラットフォーム上で構築
 \item 「サーバ」のない (\alert{サーバレス}) 構成
 \item JavaScript (ReactJSなど) を多用した、Single Page Application構成
\end{itemize}
\begin{center}
$\Downarrow$\\
\alert{ユーザの手元で計算を実行する機会の増加}
\end{center}
\end{frame}

\begin{frame}
AWSを例にした典型的な構成:
\begin{center}
\includegraphics[width=0.85\linewidth]{Figs/spa1.pdf}
\end{center}
\end{frame}

\begin{frame}
AWSを例にした典型的な構成:
\begin{center}
\includegraphics[width=0.85\linewidth]{Figs/spa3.pdf}
\end{center}
\structure{通常、ユーザ・クラウド間のHTTP通信路はSSL/TLSで保護}\\
$\Rightarrow$ HTTP通信路から外部の盗聴者へのユーザデータ漏洩を防止
\end{frame}

\begin{frame}
AWSを例にした典型的な構成:
\begin{center}
\includegraphics[width=0.85\linewidth]{Figs/spa2.pdf}
\end{center}
\structure{しかし、クラウドPF内・ブラウザ内のデータ保護は……？}
\end{frame}


\begin{frame}
\frametitle{「暗号化しているから安全です」という叙述トリック}

\begin{block}{\small (Webとはちょっと違いますが…)某クラウドストレージ事業者の例}
\begin{center}
\includegraphics[width=0.8\linewidth]{Figs/storage_enc.pdf}
\end{center} 
\end{block}

クラウドベースの(Web)サービスでよくある文言：
\begin{itemize}
 \item (SSL/TLSで)転送中のデータを暗号化して保護
 \item ストレージに保存されるデータは暗号化して保護
\end{itemize}
\end{frame}

\begin{frame}
\begin{itemize}
 \item (SSL/TLSで)転送中のデータを暗号化して保護\\
 $\Rightarrow$ 公開通信路の盗聴からデータを保護
 \item ストレージに保存されるデータを暗号化して保護\\
 $\Rightarrow$ ストレージ自体が盗まれた時や、第三者のストレージを使っている場合のデータ漏洩を防止%\footnote[frame]{\scriptsize 自社オンプレのストレージサーバを使っている場合、ディスク暗号化する理由が不明。オンプレストレージが盗まれるのか？}
\end{itemize}
\begin{center}
 \structure{いずれも事業者に対しての秘匿性を担保しているわけではない}\footnote[frame]{事業者はデータを見放題ということ。}\\
 $\Downarrow$\\
 \alert{(望む・望まないにしろ)事業者はユーザデータを不必要に取得}
\end{center}
\end{frame}

\begin{frame}
このようなクラウドサービス・Web Appを作ることは：

\begin{itemize}
\item ユーザにとって：共有不要な相手とデータを共有している
\item 事業者にとって：昨今のプライバシ・セキュリティ要求の高まりから、\alert{無用なリスクを背負いこむ可能性が大}
\end{itemize}

\begin{alertblock}{\small 今後、Web Appを作っていくにあたって}
「必要な相手とだけ」確実に・正しく、データを共有できるように、適切なデータ秘匿が必要
\end{alertblock}
\end{frame}

\begin{frame}
\frametitle{余談: 秘匿性・データプライバシをウリにしたサービス}
\small 
\begin{itemize}
\item Tresorit\footnote[frame]{\scriptsize \url{https://tresorit.com/}}:\\
事業者・サーバに情報が漏れないことを謳ったクラウドストレージサービス。Dropboxに近い。

\item KeyBase\footnote[frame]{\scriptsize \url{https://keybase.io/}}:\\
事業者・サーバに情報を漏らさず、メッセージ・ファイル共有（クラウドストレージ）が可能なSNS。

\item Signal\footnote[frame]{\scriptsize \url{https://signal.org}}:\\
事業者・サーバに情報を漏らさないメッセージング・通話アプリケーション。「最も安全な」チャットサービスと呼ばれており、各類似サービス(WhatsAppなど)にプロトコルを提供。
\end{itemize}

北米・EU共に、スノーデンの事件以降、事業者にも情報を与えない\alert{End-to-End暗号化}を謳ったサービスが強く注目を浴びている。
\end{frame}

\begin{frame}
 \frametitle{End-to-Endセキュリティの原則とは}
\end{frame}

\begin{frame}
\frametitle{WebシステムにおけるEnd-to-Endセキュリティ}
導入する意味
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{暗号化}
\begin{frame}
\centering
{\Large JavaScriptで暗号を使ってみよう [基礎編]}
今回はAESを使ってみます。

AESとは。
\end{frame}

\begin{frame}
 \frametitle{ブラウザでの暗号化: WebCrypto API}
\end{frame}

\begin{frame}
 \frametitle{サーバでの暗号化: Node.js Crypto}
\end{frame}

\begin{frame}
 \frametitle{ブラウザ・サーバ間での相互接続性の確認}

 しかしサーバで復号しているのであんまり意味がない。
\end{frame}

\begin{frame}
 \frametitle{補足: APIが違うのがめんどくさい…}
 \textbf{手前味噌だが、統合APIを使って楽をすると良い}
\end{frame}

\begin{frame}
 \frametitle{ブラウザ同士での相互接続性の確認}
 APIを通じて暗号化データをやり取りしてみる。

 E2E Security!
\end{frame}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
 \begin{enumerate}
  \item 今回は共通鍵暗号
  \item 公開鍵暗号\& Hybrid Encryption
  \item ハッシュ・署名とHMAC
　\item 超マニアック講座：RFCとアルゴリズム・フォーマット
 \end{enumerate}
\end{frame}

\begin{frame}
\frametitle{引用文献}
\bibliographystyle{IEEEtranS}
{\fontsize{6.5pt}{0pt}\selectfont
\vspace{0.5ex}
 \bibliography{references.bib}
}

\end{frame}


\backupbegin
\section{Backup}
\begin{frame}
\frametitle{Appendix}
This page is not counted.
\end{frame}
\backupend
\end{document}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
